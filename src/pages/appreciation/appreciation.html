<!--
  Generated template for the AppreciationPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Appreciation</ion-title>
  </ion-navbar>

  <!-- <ion-segment [(ngModel)]="home"  *ngIf="allappreciation==null">
    <ion-segment-button value="myappreciation" style="color: white;">
      <span>My Appreciation</span>
    </ion-segment-button>
    <ion-segment-button value="sentappreciation" style="color: white;">
      <span>Sent</span>
    </ion-segment-button>
    <ion-segment-button value="create" style="color: white; padding: 0px!important;">
      <span>Create New</span>
    </ion-segment-button>
  </ion-segment> -->

  <ion-segment [(ngModel)]="home"  *ngIf="allappreciation!=null">
    <ion-segment-button value="myappreciation" class="segmenttitle">
      <span>My Appreciation</span>
    </ion-segment-button>
    <!-- <ion-segment-button value="sentappreciation" class="segmenttitle">
      <span>Sent</span>
    </ion-segment-button> -->
    <ion-segment-button value="allappreciation" class="segmenttitle">
      <span>All</span>
    </ion-segment-button>
    <ion-segment-button value="create" class="segmenttitle">
      <span>Create</span>
    </ion-segment-button>
  </ion-segment>
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-grid style="padding-top:unset; text-align: left; margin-top:12%;
  color: rgb(10, 9, 9); background: white;" [ngSwitch]="home">
    <ion-row *ngSwitchCase="'myappreciation'">
      <!-- <span style="width: 100%; margin: 0px; padding: 0px;"> -->
      <ion-col col-12 *ngIf="myappreciation==[]||myappreciation==''||myappreciation==null ; else show_list">
        You have no appreciation.
      </ion-col>
      <ion-col col-12 *ngFor="let item of myappreciation" #show_list style="border-bottom: 1px solid #ddd;">
        <ion-row>

          <ion-col col-4 class="head_item">
              <span style="
                border-radius: 4px;
                color: #fff;
                background-color:  #2b93df;
                padding: 3px 6px 3px 6px;">
                {{item['date']||"Nill"}}
              </span>
            </ion-col>
        </ion-row>
        <ion-row class="foot_item">
            <ion-col col-12>
              <span *ngIf="item['message']!=null && item['message']!=''">{{item["message"]}}</span>
              <br>
              <span style="font-size: 12px; color: grey;">Issued By {{item["first_name"]}} {{item["last_name"]}}</span>
            </ion-col>
        </ion-row>
        <!-- <ion-row *ngIf="appreciation==[]||appreciation==''||appreciation==null">
          You have no appreciations.
        </ion-row> -->
        <ion-row class="foot_item" *ngIf="item['photo']">
            <ion-col col-4>
            Attached File -
            </ion-col>
            <ion-col col-8>
              <a (click)="open_img(item['photo'])" > Click here</a>

            </ion-col>
        </ion-row>
      </ion-col>
      <!-- </span> -->
    </ion-row>
    
    <!-- <ion-row *ngSwitchCase="'sentappreciation'">
      
      <ion-col co-12 *ngIf="sentappreciation==[]||sentappreciation==''||sentappreciation==null ; else show_list2">
        No appreciation.
      </ion-col>
      <ion-col col-12 *ngFor="let item of sentappreciation" #show_list2 style="border-bottom: 1px solid #ddd;">
          <ion-row>
            <ion-col col-4 class="head_item">
              <span style="
                border-radius: 4px;
                color: #fff;
                background-color:  #2b93df;
                padding: 3px 6px 3px 6px;">
                {{item['date']||"Nill"}}
              </span>
            </ion-col>
            <ion-col col-12>
                
                Issued for {{item["first_name"]}} {{item["last_name"]}}
                
            </ion-col>
          </ion-row>
          <ion-row class="foot_item">
              <ion-col col-12>
              <span *ngIf="item['message']!=null && item['message']!=''">{{item["message"]}}</span>
              </ion-col>
          </ion-row>
          <ion-row class="foot_item" *ngIf="item['photo']">
              <ion-col col-4>
              Attached File -
              </ion-col>
              <ion-col col-8>
                <a (click)="open_img(item['photo'])" > Click here</a>
  
            </ion-col>
        </ion-row>
      </ion-col>
    </ion-row> -->

    <ion-row *ngSwitchCase="'allappreciation'">
      <!-- <span style="width: 100%; margin: 0px; padding: 0px;"> -->
      <ion-col co-12 *ngIf="allappreciation==[]||allappreciation==''||allappreciation==null ; else show_list2">
        No appreciation.
      </ion-col>
      <ion-col col-12 *ngFor="let item of allappreciation" #show_list2 style="border-bottom: 1px solid #ddd;">
          <ion-row>
            <ion-col col-4 class="head_item">
              <span style="
                border-radius: 4px;
                color: #fff;
                background-color:  #2b93df;
                padding: 3px 6px 3px 6px;">
                {{item['date']||"Nill"}}
              </span>
            </ion-col>
            <ion-col col-12>
                
                Issued for {{item["to_first"]}} {{item["to_last"]}}
                
            </ion-col>
          </ion-row>
          <ion-row class="foot_item">
              <ion-col col-12>
              <span *ngIf="item['message']!=null && item['message']!=''">{{item["message"]}}</span>
              <br>
              <span style="font-size: 12px; color: grey;">Issued By {{item["from_first"]}} {{item["from_last"]}}</span>
              </ion-col>
          </ion-row>
          <ion-row class="foot_item" *ngIf="item['photo']">
              <ion-col col-4>
              Attached File -
              </ion-col>
              <ion-col col-8>
                <a (click)="open_img(item['photo'])" > Click here</a>
  
            </ion-col>
        </ion-row>
      </ion-col>
      <!-- </span> -->
    </ion-row>
      
    <ion-row *ngSwitchCase="'create'">
      <!-- <span style="width: 100%; margin: 0px; padding: 0px;"> -->
        <ion-col col-3><ion-label class="dis_label">Employee</ion-label></ion-col>
        <ion-col col-9>
          <ionic-selectable style="border: 1px solid #a6a6a6; border-radius: 6px; max-width: 100%; width: 100%; padding: 0px 5px"
            item-content="employee"
            [items]="emp_list"
            [(ngModel)]="appreciation_for"
            itemValueField="id"
            itemTextField="name"
            [canSearch]="true"
            placeholder="Select Employee"
            (ngModelChange)="show(appreciation_for)">
          </ionic-selectable>
        </ion-col>
      
        <ion-col col-12 radio-group [(ngModel)]="appreciation_type">
          <ion-row>
            <ion-col col-1>
              <ion-radio id="write_radio" checked value="write"></ion-radio>
            </ion-col>
            <ion-col col-5>
              <ion-label for="write_radio" class="radio_label">Write appreciation</ion-label>
            </ion-col>
            <ion-col col-1>
              <ion-radio id="pic_radio" value="pic"></ion-radio>
            </ion-col>
            <ion-col col-5>
              <ion-label for="pic_radio" class="radio_label">Upload Picture</ion-label>
            </ion-col>
          </ion-row>
        </ion-col>
        <ion-col col-12 *ngIf="appreciation_type=='write'">
          <ion-row>
            <ion-col col-12>
              <ion-textarea [(ngModel)]="appreciation_content" placeholder="Write your appreciation here"></ion-textarea>
            </ion-col>
          </ion-row>
        </ion-col>
        <ion-col col-12 *ngIf="appreciation_type=='pic'">
          <ion-row>
            <ion-col col-4>
              <input type="file" (change)="changeListener($event)" id="file-input" style="opacity: 0" #fileInp accept="image/*" />
              <p style="width : 100% ; height : auto; background: rgb(25, 72, 141);margin-top: -20px;
              color: white;
              border-radius: 5px;
              padding: 5px;">
                Choose Image</p>
            </ion-col>
            <ion-col col-8><span pull-right>{{filename}}</span></ion-col>
          </ion-row>
        </ion-col>
        <ion-col col-12>
          <button ion-button style="background: green;" pull-right (click)="submitdata()">Submit</button>
        </ion-col>
      <!-- </span> -->
    </ion-row>
  </ion-grid>
    
</ion-content>
