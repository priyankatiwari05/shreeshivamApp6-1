<!--
  Generated template for the TravelRequestShowPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>My Travel Requests</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-list>

    <ion-item
      *ngIf="travel_request_details==[]||travel_request_details==''||travel_request_details==null ; else show_list">
      No Record Found...!

    </ion-item>

    <ion-item *ngFor="let item of travel_request_details;let i=index;" #show_list (click)="open_booking_detail(i)">
      <ion-grid *ngIf="item['approval_status']=='approved'; else raised_btn" style=" padding: unset;">
        <button style="background-color: transparent; padding: unset;">
          <ion-row>
            <ion-col col-3 class="head_item">
              <span style=" border-radius: 4px; color:#fff; background-color:#2b93df; padding: 3px 6px 3px 6px;">
                {{item['origin_city'] +" - "+item['destination_city']||"Nill"}}
              </span>
            </ion-col>
          </ion-row>
          <ion-row>

            <ion-col col-12 style="text-align:right;text-transform: uppercase;" class="head_right_item">
              <div style="color:darkgreen;" *ngIf='item["approval_status"]=="approved"; else present'>
                {{item["approval_status"]}}
              </div>
              <ng-template #present>
                <div style="color:darkred;">
                  {{item["approval_status"]}}
                </div>
              </ng-template>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-6>
              <ion-row>
                <ion-col col-4 class="foot_item" style="    margin-top: 4px;">
                  Start Date : {{item["start_date"]||"NILL"}}
                </ion-col>
              </ion-row>
              <ion-row>
                <ion-col col-4 class="foot_item" style="margin-bottom: -4px;">
                  End Date : {{item["end_date"]||"NILL"}}
                </ion-col>

              </ion-row>
            </ion-col>
            <ion-col col-6>
                <ion-row>
                  <ion-col col-4 class="foot_item" style="    margin-top: 4px;">
                    Prefered Time : {{item["prefer_time"]||"NILL"}}
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col col-4 class="foot_item" style="margin-bottom: -4px;">
                    Trip Type : {{item["trip_type"]|titlecase}}
                  </ion-col>
  
                </ion-row>
              </ion-col>
            <!-- <ion-col col-6 *ngIf="item['reimbursement_status']!=null">
              <button ion-button icon-only class="up_btn" (click)="upload_doc_list(item['id'])"
                *ngIf="item['reimbursement_status']=='processing' || item['reimbursement_status']=='rejected'; else show_disabled">
                <ion-icon name="cloud-upload" class="up_icon"></ion-icon><span class="up_span">Upload <br> Documents
                </span>
              </button>
              <ng-template #show_disabled>
                <button ion-button icon-only disabled class="up_btn">
                  <ion-icon name="cloud-upload" class="up_icon"></ion-icon><span class="up_span">Upload <br>
                    Documents</span>
                </button>
              </ng-template>
            </ion-col> -->
            <!-- <ion-col col-12 *ngIf="item['travel_booking_status']!=null && item['travel_booking_status']!=''">
              Travel Booking Status : {{item['travel_booking_status']|titlecase}}
            </ion-col> -->
          </ion-row>
          <ion-row *ngIf="item['travel_booking_status']!=null && item['travel_booking_status']!=''">
            <ion-col col-5>
              <ion-row>
                  <ion-col class="foot_item">Travel Booking Status :</ion-col>
              </ion-row>
            </ion-col>
            <ion-col col-4>
              <ion-row>
                <ion-col class="foot_item">
                  <span pull-left *ngIf="item['travel_booking_status']=='booked'"style="color:green; background:rgb(216, 213, 213); padding:5px; border-radius:5px; margin-top: -4px;">{{item['travel_booking_status']|titlecase}}</span>
                  <span pull-left *ngIf="item['travel_booking_status']=='pending'"style="color:blue; background:rgb(216, 213, 213); padding:5px; border-radius:5px; margin-top: -4px;">{{item['travel_booking_status']|titlecase}}</span>
                  <span pull-left *ngIf="item['travel_booking_status']=='closed'"style="color:orange; background:rgb(216, 213, 213); padding:5px; border-radius:5px; margin-top: -4px;">{{item['travel_booking_status']|titlecase}}</span>
                  <span pull-left *ngIf="item['travel_booking_status']=='rejected'"style="color:red; background:rgb(216, 213, 213); padding:5px; border-radius:5px; margin-top: -4px;">{{item['travel_booking_status']|titlecase}}</span>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>

        </button>
      </ion-grid>


      <ng-template #raised_btn>
        <ion-row>
          <ion-col col-3 class="head_item">
            <span style="
                            border-radius: 4px;
                            color: #fff;
                            background-color:  #2b93df;
                            padding: 3px 6px 3px 6px;">
              {{item['origin_city'] +" - "+item['destination_city']||"Nill"}}
            </span>
          </ion-col>
          <ion-col col-9 style="text-align:right;text-transform: uppercase;" class="head_right_item">
            <div style="color:darkgreen;" *ngIf='item["approval_status"]=="approved"; else present'>
              {{item["approval_status"]}}
            </div>
            <ng-template #present>
              <div style="color:darkred;">
                {{item["approval_status"]}}
              </div>
            </ng-template>
          </ion-col>


        </ion-row>

        <ion-row>
          <ion-col col-4 class="foot_item" style="    margin-top: 4px;">
            Start Date : {{item["start_date"]||"NILL"}}
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-4 class="foot_item" style="margin-bottom: -4px;">
            Prefered Time : {{item["prefer_time"]||"NILL"}}
          </ion-col>

        </ion-row>

      </ng-template>
    </ion-item>
  </ion-list>

</ion-content>
