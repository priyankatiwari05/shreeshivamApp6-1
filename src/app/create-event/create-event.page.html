<!--
  Generated template for the CreateEventPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" icon="arrow-back"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="page_type!='add_pics'">Create Event</ion-title>
    <ion-title *ngIf="page_type=='add_pics'">Upload Event Pics</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col size="12" *ngIf="page_type!='add_pics'">
      <ion-input [(ngModel)]="title" ngDefaultControl placeholder="Write Title" style="width:100%; max-height: 100%!important;"></ion-input>
    </ion-col>
    <!-- <ion-col size="6">
      <ion-datetime [(ngModel)]="start_date" min="{{today}}" max="{{next_year}}" displayFormat="YYYY-MM-DD" placeholder="Select Start Date" pickerFormat="YYYY-MM-DD"></ion-datetime>
    </ion-col>
    <ion-col size="6">
      <ion-datetime [(ngModel)]="end_date" min="{{today}}" max="{{next_year}}" displayFormat="YYYY-MM-DD" placeholder="Select End Date" pickerFormat="YYYY-MM-DD"></ion-datetime>
    </ion-col> -->
    <ion-col size="12" radio-group [(ngModel)]="type" ngDefaultControl *ngIf="page_type!='add_pics'">
      <ion-row>
        <ion-col size="1">
          <ion-radio id="write_radio" checked value="write"></ion-radio>
        </ion-col>
        <ion-col size="5">
          <ion-label for="write_radio" class="radio_label">Write Description</ion-label>
        </ion-col>
        <ion-col size="1">
          <ion-radio id="pic_radio" value="pic"></ion-radio>
        </ion-col>
        <ion-col size="5">
          <ion-label for="pic_radio" class="radio_label">Upload Picture</ion-label>
        </ion-col>
      </ion-row>
    </ion-col>
    <ion-col size="12" *ngIf="type=='write' && page_type!='add_pics'">
      <ion-row>
        <ion-col size="12">
          <ion-textarea [(ngModel)]="description" ngDefaultControl placeholder="Write your description here"></ion-textarea>
        </ion-col>
      </ion-row>
    </ion-col>
    <ion-col size="12" *ngIf="type=='pic' && page_type!='add_pics'">
      <ion-row>
        <ion-col size="4">
          <input type="file" (change)="changeListener($event)" id="file-input" style="opacity: 0" #fileInp accept="image/*" />
          <p style="width : 100% ; height : auto; background: rgb(25, 72, 141);margin-top: -20px;
          color: white;
          border-radius: 5px;
          padding: 5px;">
            Choose Image</p>
        </ion-col>
        <ion-col size="8"><span>{{filename}}</span></ion-col>
      </ion-row>
    </ion-col>

    <!-- <ion-col size="12">
      <ion-textarea [(ngModel)]="description" placeholder="Write Description" rows="3" style="width:100%; max-height: 100%!important;"></ion-textarea>
    </ion-col> -->

    <ion-col size="6" *ngIf="page_type!='add_pics'">
      <ion-datetime [(ngModel)]="from_date" displayFormat="YYYY-MM-DD" placeholder="From Date" pickerFormat="YYYY-MM-DD"></ion-datetime>
    </ion-col>
    <ion-col size="6" *ngIf="page_type!='add_pics'">
      <ion-datetime [(ngModel)]="to_date" displayFormat="YYYY-MM-DD" placeholder="To Date" pickerFormat="YYYY-MM-DD" (ionChange)="check_date()"></ion-datetime>
    </ion-col>
    <ion-col size="6" *ngIf="page_type!='add_pics'">
      <ion-datetime [(ngModel)]="from_time" displayFormat="HH:mm" placeholder="From Time" pickerFormat="HH:mm"></ion-datetime>
    </ion-col>
    <ion-col size="6" *ngIf="page_type!='add_pics'">
      <ion-datetime [(ngModel)]="to_time" displayFormat="HH:mm" placeholder="To Time" pickerFormat="HH:mm"></ion-datetime>
    </ion-col>

      <ion-col size="12">
          <ion-row>
              <ion-col size="12">
                <ion-label class="dis_label">
                  Upload Pictures
                </ion-label>
              </ion-col>
              <ion-row style="border: 1px solid #b8b8b8;
              border-radius: 8px;">
                <ion-col col-10>
        
                  <input ion-input type="file" style="padding-top: 10px;" (change)="changeListener_event($event)"  [(ngModel)]="file_input" id="file-input" #fileInp
                    accept="image/*" />
                </ion-col>
                <ion-col col-2>
                  <ion-button style="width: 100%;" expand="block" [disabled]="filename_event==null||filename_event==''" (click)="add_to_list()">Add File</ion-button>
                </ion-col>
              </ion-row>
            </ion-row>
            <ion-row  *ngIf="data_list == []||data_list==''||data_list==null ; else show_list" >
              <ion-col size="12">No file attached</ion-col>
            </ion-row>
            <ng-template #show_list>
              <ion-col size="12" style="    overflow-x: scroll;">
              <table class="table  table-hover" >
                <thead>
                  <tr>
                    <th style=" width: 15%; ">Sr</th>
                    <th style=" width: 70%; ">File</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of data_list; index as k">
                    <td>
                        {{k+1}}
                    </td>
                    <td>
                      {{item['filename']}}
                    </td>
                    <td>
                      <ion-button size="small" (click)="delete_id_list(k)" >
                        <ion-icon style="margin:unset; " name="trash"></ion-icon>
                      </ion-button>
        
                    </td>
                  </tr>
                </tbody>
              </table>
        
            </ion-col>
          </ng-template>
      </ion-col>
      <ion-col size="12" *ngIf="page_type!='add_pics'">
          <ion-button pull-right style="float: right!important" (click)="create_event()">Submit</ion-button>
      </ion-col>
      <ion-col size="12" *ngIf="page_type=='add_pics'">
          <ion-button pull-right style="float: right!important" (click)="add_event_pics()">Upload</ion-button>
      </ion-col>
      
    </ion-row>
</ion-content>
